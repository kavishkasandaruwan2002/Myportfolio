{"version":3,"file":"cosmic-aurora-BD9UUqrq.js","sources":["../../src/components/ui/cosmic-aurora.tsx"],"sourcesContent":["import React, { useRef, useEffect } from 'react';\r\n\r\nconst AuroraCanvas: React.FC = () => {\r\n  const canvasRef = useRef<HTMLCanvasElement | null>(null);\r\n\r\n  useEffect(() => {\r\n    const canvas = canvasRef.current;\r\n    if (!canvas) return;\r\n    const ctx = canvas.getContext('2d');\r\n    if (!ctx) return;\r\n\r\n    // Attach canvas into the hero section so it fills that section\r\n    const hero = document.getElementById('home');\r\n    let appendedToHero = false;\r\n    if (hero && canvas.parentElement !== hero) {\r\n      // Make sure the hero can contain absolutely positioned children\r\n      const prevPos = window.getComputedStyle(hero).position;\r\n      if (!prevPos || prevPos === 'static') hero.style.position = 'relative';\r\n      hero.appendChild(canvas);\r\n      appendedToHero = true;\r\n      canvas.style.position = 'absolute';\r\n      canvas.style.top = '0';\r\n      canvas.style.left = '0';\r\n      canvas.style.width = '100%';\r\n      canvas.style.height = '100%';\r\n      canvas.style.pointerEvents = 'none';\r\n    }\r\n\r\n    let width = 0, height = 0;\r\n    let particles: any[] = [];\r\n    let hue = 200;\r\n    let time = 0;\r\n    let animationFrameId = 0;\r\n\r\n    const config = {\r\n      particleCount: 800,\r\n      particleSpeed: 0.1,\r\n      particleLifetime: 300,\r\n      trailLength: 0.08,\r\n      hueSpeed: 0.2,\r\n      noiseScale: 0.002,\r\n      noiseSpeed: 0.0005,\r\n      canvasGlow: 15,\r\n    } as const;\r\n\r\n    const noise = (() => {\r\n      const p = new Uint8Array(512);\r\n      for (let i = 0; i < 256; i++) p[i] = p[i + 256] = i;\r\n      const perm = new Uint8Array(512);\r\n      for (let i = 0; i < 256; i++) {\r\n        const j = Math.floor(Math.random() * (256 - i)) + i;\r\n        [p[i], p[j]] = [p[j], p[i]];\r\n      }\r\n      for (let i = 0; i < 512; i++) perm[i] = p[i & 255];\r\n\r\n      function fade(t: number) {\r\n        return t * t * t * (t * (t * 6 - 15) + 10);\r\n      }\r\n      function lerp(t: number, a: number, b: number) {\r\n        return a + t * (b - a);\r\n      }\r\n      function grad(hash: number, x: number, y: number) {\r\n        const h = hash & 15;\r\n        const u = h < 8 ? x : y;\r\n        const v = h < 4 ? y : h === 12 || h === 14 ? x : 0;\r\n        return ((h & 1) === 0 ? u : -u) + ((h & 2) === 0 ? v : -v);\r\n      }\r\n\r\n      return (x: number, y: number, z: number) => {\r\n        const X = Math.floor(x) & 255;\r\n        const Y = Math.floor(y) & 255;\r\n        const Z = Math.floor(z) & 255;\r\n        x -= Math.floor(x);\r\n        y -= Math.floor(y);\r\n        z -= Math.floor(z);\r\n        const u = fade(x);\r\n        const v = fade(y);\r\n        const w = fade(z);\r\n        const A = perm[X] + Y;\r\n        const AA = perm[A] + Z;\r\n        const AB = perm[A + 1] + Z;\r\n        const B = perm[X + 1] + Y;\r\n        const BA = perm[B] + Z;\r\n        const BB = perm[B + 1] + Z;\r\n\r\n        return lerp(\r\n          w,\r\n          lerp(\r\n            v,\r\n            lerp(u, grad(perm[AA], x, y), grad(perm[BA], x - 1, y)),\r\n            lerp(u, grad(perm[AB], x, y - 1), grad(perm[BB], x - 1, y - 1))\r\n          ),\r\n          lerp(\r\n            v,\r\n            lerp(u, grad(perm[AA + 1], x, y), grad(perm[BA + 1], x - 1, y)),\r\n            lerp(u, grad(perm[AB + 1], x, y - 1), grad(perm[BB + 1], x - 1, y - 1))\r\n          )\r\n        );\r\n      };\r\n    })();\r\n\r\n    class Particle {\r\n      x: number;\r\n      y: number;\r\n      vx: number;\r\n      vy: number;\r\n      lifetime: number;\r\n      age: number;\r\n\r\n      constructor() {\r\n        this.x = 0; this.y = 0; this.vx = 0; this.vy = 0; this.lifetime = 0; this.age = 0;\r\n        this.reset();\r\n      }\r\n\r\n      reset() {\r\n        this.x = Math.random() * width;\r\n        this.y = height / 2 + (Math.random() * height / 4 - height / 8);\r\n        this.vx = (Math.random() - 0.5) * 0.5;\r\n        this.vy = 0;\r\n        this.lifetime = Math.random() * config.particleLifetime;\r\n        this.age = 0;\r\n      }\r\n\r\n      update(timeTick: number) {\r\n        this.age++;\r\n        if (this.age > this.lifetime) this.reset();\r\n\r\n        const angle =\r\n          noise(this.x * config.noiseScale, this.y * config.noiseScale, timeTick * config.noiseSpeed) *\r\n          Math.PI *\r\n          4;\r\n\r\n        this.vx += Math.cos(angle) * config.particleSpeed;\r\n        this.vy += Math.sin(angle) * config.particleSpeed;\r\n\r\n        this.vx *= 0.98;\r\n        this.vy *= 0.98;\r\n\r\n        this.x += this.vx;\r\n        this.y += this.vy;\r\n\r\n        if (this.x < 0 || this.x > width || this.y < 0 || this.y > height) this.reset();\r\n      }\r\n\r\n      draw() {\r\n        if (!ctx) return;\r\n        const opacity = 1 - this.age / this.lifetime;\r\n        const particleHue = hue + (this.x / width) * 60;\r\n\r\n        ctx.beginPath();\r\n        ctx.fillStyle = `hsla(${particleHue}, 80%, 45%, ${opacity * 0.35})`;\r\n        ctx.arc(this.x, this.y, 1.8, 0, Math.PI * 2);\r\n        ctx.fill();\r\n      }\r\n    }\r\n\r\n    const setup = () => {\r\n      const dpr = Math.max(1, window.devicePixelRatio || 1);\r\n      let rect: DOMRect | null = null;\r\n      if (hero) rect = hero.getBoundingClientRect();\r\n\r\n      if (rect) {\r\n        width = Math.max(1, Math.round(rect.width));\r\n        height = Math.max(1, Math.round(rect.height));\r\n      } else {\r\n        width = Math.max(1, window.innerWidth);\r\n        height = Math.max(1, window.innerHeight);\r\n      }\r\n\r\n      // set canvas pixel size for DPR\r\n      canvas.width = Math.max(1, Math.floor(width * dpr));\r\n      canvas.height = Math.max(1, Math.floor(height * dpr));\r\n      // CSS size\r\n      canvas.style.width = width + 'px';\r\n      canvas.style.height = height + 'px';\r\n      // scale context so drawing uses CSS pixels\r\n      ctx.setTransform(dpr, 0, 0, dpr, 0, 0);\r\n\r\n      particles = [];\r\n      for (let i = 0; i < config.particleCount; i++) {\r\n        particles.push(new Particle());\r\n      }\r\n    };\r\n\r\n    const animate = () => {\r\n      if (!ctx) return;\r\n      ctx.fillStyle = `rgba(235, 240, 255, 0.1)`;\r\n      ctx.fillRect(0, 0, width, height);\r\n\r\n      ctx.shadowBlur = config.canvasGlow;\r\n      ctx.shadowColor = `hsla(${hue}, 100%, 50%, 0.3)`;\r\n\r\n      particles.forEach((p) => {\r\n        p.update(time);\r\n        p.draw();\r\n      });\r\n\r\n      ctx.shadowBlur = 0;\r\n\r\n      hue += config.hueSpeed;\r\n      time++;\r\n\r\n      animationFrameId = window.requestAnimationFrame(animate);\r\n    };\r\n\r\n    setup();\r\n    animate();\r\n    window.addEventListener('resize', setup);\r\n\r\n    return () => {\r\n      window.removeEventListener('resize', setup);\r\n      window.cancelAnimationFrame(animationFrameId);\r\n      try {\r\n        if (appendedToHero && hero && hero.contains(canvas)) {\r\n          hero.removeChild(canvas);\r\n        }\r\n      } catch (e) {\r\n        // ignore cleanup errors\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"absolute inset-0 -z-10\">\r\n      <div className=\"content sr-only\">\r\n        <h1>Cosmic Aurora</h1>\r\n        <p>A serene, generative celestial light show, built with React.</p>\r\n      </div>\r\n      <canvas ref={canvasRef} id=\"aurora-canvas\" className=\"w-full h-full block\" />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AuroraCanvas;\r\n"],"names":["AuroraCanvas","canvasRef","useRef","useEffect","canvas","ctx","hero","appendedToHero","prevPos","width","height","particles","hue","time","animationFrameId","config","noise","p","i","perm","j","fade","lerp","a","b","grad","hash","x","y","h","u","v","z","X","Y","Z","w","A","AA","AB","B","BA","BB","Particle","__publicField","timeTick","angle","opacity","particleHue","setup","dpr","rect","animate","jsxs","jsx"],"mappings":"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"}